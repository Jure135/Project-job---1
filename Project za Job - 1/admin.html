<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - Minicabit</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="admin-panel">
      <header class="admin-header">
        <div class="container">
          <div class="admin-header-content">
            <div class="admin-logo">
              <h1><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h1>
            </div>
            <div class="admin-user-info">
              <span>Welcome, <strong id="admin-username">Admin</strong></span>
              <button class="btn btn-outline" onclick="logout()">Logout</button>
            </div>
          </div>
        </div>
      </header>

      <nav class="admin-nav">
        <div class="container">
          <div class="admin-nav-items">
            <button class="admin-nav-item active" data-section="dashboard">
              <i class="fas fa-chart-line"></i> Dashboard
            </button>
            <button class="admin-nav-item" data-section="users">
              <i class="fas fa-users"></i> Users
            </button>
            <button class="admin-nav-item" data-section="drivers">
              <i class="fas fa-car"></i> Drivers
            </button>
            <button class="admin-nav-item" data-section="bookings">
              <i class="fas fa-calendar-check"></i> Bookings
            </button>
            <button class="admin-nav-item" data-section="tracking">
              <i class="fas fa-map-marked-alt"></i> Live Tracking
            </button>
            <button class="admin-nav-item" data-section="pricing">
              <i class="fas fa-tags"></i> Pricing
            </button>
            <button class="admin-nav-item" data-section="promos">
              <i class="fas fa-percent"></i> Promo Codes
            </button>
            <button class="admin-nav-item" data-section="support">
              <i class="fas fa-headset"></i> Support
            </button>
            <button class="admin-nav-item" data-section="analytics">
              <i class="fas fa-chart-bar"></i> Analytics
            </button>
          </div>
        </div>
      </nav>

      <main class="admin-content">
        <div class="container">
          <section id="dashboard-section" class="admin-section active">
            <div class="dashboard-header">
              <h2>Dashboard Overview</h2>
              <div class="dashboard-actions">
                <button class="btn btn-primary" onclick="refreshDashboard()">
                  <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-outline" onclick="exportReport()">
                  <i class="fas fa-download"></i> Export Report
                </button>
              </div>
            </div>

            <div class="metrics-grid">
              <div class="metric-card">
                <div class="metric-icon">
                  <i class="fas fa-users"></i>
                </div>
                <div class="metric-content">
                  <h3>Total Users</h3>
                  <div class="metric-number">12,847</div>
                  <div class="metric-change positive">+8.2% this month</div>
                </div>
              </div>

              <div class="metric-card">
                <div class="metric-icon">
                  <i class="fas fa-car"></i>
                </div>
                <div class="metric-content">
                  <h3>Active Drivers</h3>
                  <div class="metric-number">1,245</div>
                  <div class="metric-change positive">+12.5% this month</div>
                </div>
              </div>

              <div class="metric-card">
                <div class="metric-icon">
                  <i class="fas fa-calendar-check"></i>
                </div>
                <div class="metric-content">
                  <h3>Bookings Today</h3>
                  <div class="metric-number">342</div>
                  <div class="metric-change negative">-3.1% vs yesterday</div>
                </div>
              </div>

              <div class="metric-card">
                <div class="metric-icon">
                  <i class="fas fa-pound-sign"></i>
                </div>
                <div class="metric-content">
                  <h3>Revenue Today</h3>
                  <div class="metric-number">£8,450</div>
                  <div class="metric-change positive">+15.3% vs yesterday</div>
                </div>
              </div>
            </div>

            <div class="charts-grid">
              <div class="chart-container">
                <h3>Bookings Overview</h3>
                <canvas id="bookingsChart"></canvas>
              </div>
              <div class="chart-container">
                <h3>Revenue Trend</h3>
                <canvas id="revenueChart"></canvas>
              </div>
            </div>

            <div class="recent-activity">
              <h3>Recent Activity</h3>
              <div class="activity-list">
                <div class="activity-item">
                  <div class="activity-icon">
                    <i class="fas fa-user-plus"></i>
                  </div>
                  <div class="activity-content">
                    <p>
                      <strong>New user registered:</strong> john.smith@email.com
                    </p>
                    <span class="activity-time">2 minutes ago</span>
                  </div>
                </div>
                <div class="activity-item">
                  <div class="activity-icon">
                    <i class="fas fa-calendar-check"></i>
                  </div>
                  <div class="activity-content">
                    <p>
                      <strong>Booking completed:</strong> Trip #BK1234 - £25.50
                    </p>
                    <span class="activity-time">5 minutes ago</span>
                  </div>
                </div>
                <div class="activity-item">
                  <div class="activity-icon">
                    <i class="fas fa-car"></i>
                  </div>
                  <div class="activity-content">
                    <p>
                      <strong>Driver verified:</strong> Sarah Johnson (ID:
                      DR567)
                    </p>
                    <span class="activity-time">15 minutes ago</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="users-section" class="admin-section">
            <div class="section-header">
              <h2>User Management</h2>
              <div class="section-actions">
                <button class="btn btn-primary" onclick="addNewUser()">
                  <i class="fas fa-user-plus"></i> Add User
                </button>
                <button class="btn btn-outline" onclick="exportUsers()">
                  <i class="fas fa-download"></i> Export
                </button>
              </div>
            </div>

            <div class="filters-container">
              <div class="search-box">
                <input
                  type="text"
                  placeholder="Search users..."
                  id="user-search"
                />
                <i class="fas fa-search"></i>
              </div>
              <div class="filter-options">
                <select id="user-status-filter">
                  <option value="">All Status</option>
                  <option value="active">Active</option>
                  <option value="inactive">Inactive</option>
                  <option value="suspended">Suspended</option>
                </select>
                <select id="user-date-filter">
                  <option value="">All Time</option>
                  <option value="today">Today</option>
                  <option value="week">This Week</option>
                  <option value="month">This Month</option>
                </select>
              </div>
            </div>

            <div class="table-container">
              <table class="data-table" id="users-table">
                <thead>
                  <tr>
                    <th><input type="checkbox" id="select-all-users" /></th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Trips</th>
                    <th>Total Spent</th>
                    <th>Status</th>
                    <th>Joined</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

            <div class="pagination">
              <button class="pagination-btn" disabled>Previous</button>
              <span class="pagination-info">1 of 10</span>
              <button class="pagination-btn">Next</button>
            </div>
          </section>

          <section id="drivers-section" class="admin-section">
            <div class="section-header">
              <h2>Driver Management</h2>
              <div class="section-actions">
                <button class="btn btn-primary" onclick="addNewDriver()">
                  <i class="fas fa-plus"></i> Add Driver
                </button>
                <button class="btn btn-outline" onclick="bulkVerifyDrivers()">
                  <i class="fas fa-check-double"></i> Bulk Verify
                </button>
              </div>
            </div>

            <div class="driver-stats">
              <div class="stat-card">
                <h4>Total Drivers</h4>
                <div class="stat-number">1,245</div>
              </div>
              <div class="stat-card">
                <h4>Online Now</h4>
                <div class="stat-number">387</div>
              </div>
              <div class="stat-card">
                <h4>Pending Verification</h4>
                <div class="stat-number">23</div>
              </div>
              <div class="stat-card">
                <h4>Average Rating</h4>
                <div class="stat-number">4.8</div>
              </div>
            </div>

            <div class="table-container">
              <table class="data-table" id="drivers-table">
                <thead>
                  <tr>
                    <th><input type="checkbox" id="select-all-drivers" /></th>
                    <th>Driver</th>
                    <th>License</th>
                    <th>Vehicle</th>
                    <th>Rating</th>
                    <th>Trips</th>
                    <th>Status</th>
                    <th>Online</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>

          <section id="tracking-section" class="admin-section">
            <div class="section-header">
              <h2>Live Trip Tracking</h2>
              <div class="section-actions">
                <button class="btn btn-primary" onclick="refreshTracking()">
                  <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-outline" onclick="exportTrackingData()">
                  <i class="fas fa-download"></i> Export
                </button>
              </div>
            </div>

            <div class="tracking-layout">
              <div class="tracking-map-container">
                <div id="live-tracking-map" class="tracking-map"></div>
              </div>

              <div class="active-trips-panel">
                <h3>Active Trips</h3>
                <div class="trips-list" id="active-trips-list"></div>
              </div>
            </div>
          </section>

          <section id="pricing-section" class="admin-section">
            <div class="section-header">
              <h2>Pricing Management</h2>
              <div class="section-actions">
                <button class="btn btn-primary" onclick="addPricingRule()">
                  <i class="fas fa-plus"></i> Add Rule
                </button>
                <button class="btn btn-outline" onclick="exportPricing()">
                  <i class="fas fa-download"></i> Export
                </button>
              </div>
            </div>

            <div class="pricing-overview">
              <div class="pricing-card">
                <h4>Base Rate</h4>
                <div class="pricing-value">£2.50 <span>per mile</span></div>
                <button class="btn btn-small" onclick="editBaseRate()">
                  Edit
                </button>
              </div>
              <div class="pricing-card">
                <h4>Booking Fee</h4>
                <div class="pricing-value">£3.00 <span>per booking</span></div>
                <button class="btn btn-small" onclick="editBookingFee()">
                  Edit
                </button>
              </div>
              <div class="pricing-card">
                <h4>Commission Rate</h4>
                <div class="pricing-value">15% <span>per trip</span></div>
                <button class="btn btn-small" onclick="editCommission()">
                  Edit
                </button>
              </div>
            </div>

            <div class="surge-pricing">
              <h3>Surge Pricing Rules</h3>
              <div class="surge-rules">
                <div class="surge-rule">
                  <div class="surge-info">
                    <h4>Peak Hours (7-9 AM, 5-7 PM)</h4>
                    <p>Monday to Friday</p>
                  </div>
                  <div class="surge-multiplier">1.3x</div>
                  <div class="surge-actions">
                    <button
                      class="btn btn-small"
                      onclick="editSurgeRule('peak')"
                    >
                      Edit
                    </button>
                    <button
                      class="btn btn-small btn-delete"
                      onclick="deleteSurgeRule('peak')"
                    >
                      Delete
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="promos-section" class="admin-section">
            <div class="section-header">
              <h2>Promotional Codes</h2>
              <div class="section-actions">
                <button class="btn btn-primary" onclick="createPromoCode()">
                  <i class="fas fa-plus"></i> Create Promo
                </button>
                <button class="btn btn-outline" onclick="bulkCreatePromos()">
                  <i class="fas fa-layer-group"></i> Bulk Create
                </button>
              </div>
            </div>

            <div class="promo-stats">
              <div class="stat-card">
                <h4>Active Promos</h4>
                <div class="stat-number">15</div>
              </div>
              <div class="stat-card">
                <h4>Used Today</h4>
                <div class="stat-number">127</div>
              </div>
              <div class="stat-card">
                <h4>Total Savings</h4>
                <div class="stat-number">£2,340</div>
              </div>
            </div>

            <div class="table-container">
              <table class="data-table" id="promos-table">
                <thead>
                  <tr>
                    <th>Code</th>
                    <th>Type</th>
                    <th>Discount</th>
                    <th>Uses</th>
                    <th>Max Uses</th>
                    <th>Expires</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>

          <section id="support-section" class="admin-section">
            <div class="section-header">
              <h2>Customer Support</h2>
              <div class="section-actions">
                <button class="btn btn-primary" onclick="refreshSupport()">
                  <i class="fas fa-sync-alt"></i> Refresh
                </button>
              </div>
            </div>

            <div class="support-overview">
              <div class="support-card">
                <h4>Open Tickets</h4>
                <div class="support-number">23</div>
              </div>
              <div class="support-card">
                <h4>Avg Response Time</h4>
                <div class="support-number">12 min</div>
              </div>
              <div class="support-card">
                <h4>Satisfaction Rate</h4>
                <div class="support-number">94%</div>
              </div>
            </div>

            <div class="support-tickets">
              <h3>Recent Tickets</h3>
              <div class="tickets-list"></div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <div id="admin-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Modal Title</h2>
          <span class="close" onclick="closeAdminModal()">&times;</span>
        </div>
        <div class="modal-body" id="modal-body"></div>
      </div>
    </div>
    <script src="script.js"></script>
    <script src="admin.js"></script>
  </body>
</html>
